<!DOCTYPE html>
<html>

<head>
    <title>Mahabalipuram - Virtual Reality Tour</title>
    <link rel="stylesheet" href="indexdup.css">
    <style>
        #location-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            padding: 10px;
        }

        #location-buttons button {
            min-width: 120px;
        }
    </style>
</head>

<body>
    <div id="vr-splash">
        <div class="splash-content">
            <h1>Experience Mahabalipuram VR</h1>
            <p>Enter the immersive virtual tour of Shore Temple and Pancha Rathas. Audio guide will start automatically.
            </p>
            <button id="start-vr-btn">Begin Virtual Tour</button>
        </div>
    </div>

    <div class="top-controls">
        <select id="language-switcher">
            <option value="en">English</option>
            <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
            <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        </select>
        <button id="audio-control-btn">üîä Audio Enabled</button>
        <button id="fullscreen-btn">Fullscreen</button>
    </div>

    <div id="location-buttons">
        <button onclick="goTo('shivan_statue')" id="btn-shivan_statue">Shivan Statue</button>
        <button onclick="goTo('main_temple')" id="btn-main_temple">Main Temple</button>
        <button onclick="goTo('outer_complex')" id="btn-outer_complex">Outer Complex</button>
        <button onclick="goTo('dharmaraja_ratha')" id="btn-dharmaraja_ratha">Dharmaraja Ratha</button>
        <button onclick="goTo('arjuna_ratha')" id="btn-arjuna_ratha">Arjuna Ratha</button>
        <button onclick="goTo('nakula_ratha')" id="btn-nakula_ratha">Nakula Ratha</button>
    </div>

    <div id="street-view"></div>

    <!-- Sculpture Labels -->
    <div class="custom-label" id="shivan_statue-label">
        <span class="label-title">Shivan Statue (Somaskanda)</span>
        <div class="label-desc">A magnificent carving of Lord Shiva with Parvati and Skanda inside the main shrine.
        </div>
    </div>
    <div class="custom-label" id="main_temple-label">
        <span class="label-title">Shore Temple Main Shrine</span>
        <div class="label-desc">The 8th-century structural masterpiece, one of the oldest in South India.</div>
    </div>
    <div class="custom-label" id="outer_complex-label">
        <span class="label-title">Shore Temple Outer Courtyard</span>
        <div class="label-desc">The temple is surrounded by a boundary wall with numerous Nandi (sacred bull)
            sculptures.</div>
    </div>
    <div class="custom-label" id="dharmaraja_ratha-label">
        <span class="label-title">Dharmaraja Ratha</span>
        <div class="label-desc">The tallest and most elaborate of the monolithic rathas, dedicated to Lord Shiva.</div>
    </div>
    <div class="custom-label" id="arjuna_ratha-label">
        <span class="label-title">Arjuna Ratha</span>
        <div class="label-desc">A beautiful monolithic temple with exquisite carvings of gods and celestial beings.
        </div>
    </div>
    <div class="custom-label" id="nakula_ratha-label">
        <span class="label-title">Nakula Sahadeva Ratha</span>
        <div class="label-desc">Unique for its apsidal shape (Gajaprishta), resembling the back of an elephant.</div>
    </div>

    <!-- Audio elements placeholders -->
    <audio id="shivan_statue-audio" src="audio/shivan_statue.mp3" preload="auto"></audio>
    <audio id="main_temple-audio" src="audio/main_temple.mp3" preload="auto"></audio>
    <audio id="outer_complex-audio" src="audio/outer_complex.mp3" preload="auto"></audio>
    <audio id="dharmaraja_ratha-audio" src="audio/dharmaraja_ratha.mp3" preload="auto"></audio>
    <audio id="arjuna_ratha-audio" src="audio/arjuna_ratha.mp3" preload="auto"></audio>
    <audio id="nakula_ratha-audio" src="audio/nakula_ratha.mp3" preload="auto"></audio>

    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyATew-TdTHzI9IZjizM8dOJxMBXPB6LRfE&libraries=geometry&callback=initPanorama"
        async defer></script>

    <script>
        let panorama = null;
        let panoramaReady = false;
        let audioContextLoaded = false;
        let currentActiveLocation = null;
        const audioBtn = document.getElementById('audio-control-btn');
        let audioState = 'paused';

        const translations = {
            shivan_statue: {
                en: { title: 'Shivan Statue (Somaskanda)', desc: 'A magnificent carving of Lord Shiva with Parvati and Skanda inside the main shrine.', nav: 'Shivan Statue' },
                ta: { title: '‡Æö‡Æø‡Æµ‡Æ©‡Øç ‡Æö‡Æø‡Æ≤‡Øà (‡Æö‡Øã‡ÆÆ‡Ææ‡Æ∏‡Øç‡Æï‡Æ®‡Øç‡Æ§‡Æ∞‡Øç)', desc: '‡Æï‡Æ∞‡ØÅ‡Æµ‡Æ±‡Øà‡Æï‡Øç‡Æï‡ØÅ‡Æ≥‡Øç ‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Æ§‡Æø ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æ∏‡Øç‡Æï‡Æ®‡Øç‡Æ§‡Æ∞‡ØÅ‡Æü‡Æ©‡Øç ‡Æö‡Æø‡Æµ‡Æ™‡ØÜ‡Æ∞‡ØÅ‡ÆÆ‡Ææ‡Æ©‡Æø‡Æ©‡Øç ‡ÆÖ‡Æ±‡Øç‡Æ™‡ØÅ‡Æ§‡ÆÆ‡Ææ‡Æ© ‡Æö‡ØÜ‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ≤‡Øç.', nav: '‡Æö‡Æø‡Æµ‡Æ©‡Øç ‡Æö‡Æø‡Æ≤‡Øà' },
                kn: { title: '‡≤∂‡≤ø‡≤µ‡≤® ‡≤µ‡≤ø‡≤ó‡≥ç‡≤∞‡≤π (‡≤∏‡≥ã‡≤Æ‡≤æ‡≤∏‡≥ç‡≤ï‡≤Ç‡≤¶)', desc: '‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø ‡≤ó‡≤∞‡≥ç‡≤≠‡≤ó‡≥Å‡≤°‡≤ø‡≤Ø‡≥ä‡≤≥‡≤ó‡≥Ü ‡≤™‡≤æ‡≤∞‡≥ç‡≤µ‡≤§‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤∏‡≥ç‡≤ï‡≤Ç‡≤¶‡≤®‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ó‡≥Ü ‡≤∂‡≤ø‡≤µ‡≤® ‡≤≠‡≤µ‡≥ç‡≤Ø‡≤µ‡≤æ‡≤¶ ‡≤ï‡≥Ü‡≤§‡≥ç‡≤§‡≤®‡≥Ü.', nav: '‡≤∂‡≤ø‡≤µ‡≤® ‡≤µ‡≤ø‡≤ó‡≥ç‡≤∞‡≤π' },
                hi: { title: '‡§∂‡§ø‡§µ ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ (‡§∏‡•ã‡§Æ‡§æ‡§∏‡•ç‡§ï‡§Ç‡§¶)', desc: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ó‡§∞‡•ç‡§≠‡§ó‡•É‡§π ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞ ‡§™‡§æ‡§∞‡•ç‡§µ‡§§‡•Ä ‡§î‡§∞ ‡§∏‡•ç‡§ï‡§Ç‡§¶ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§≠‡§ó‡§µ‡§æ‡§® ‡§∂‡§ø‡§µ ‡§ï‡•Ä ‡§è‡§ï ‡§∂‡§æ‡§®‡§¶‡§æ‡§∞ ‡§®‡§ï‡•ç‡§ï‡§æ‡§∂‡•Ä‡•§', nav: '‡§∂‡§ø‡§µ ‡§™‡•ç‡§∞‡§§‡§ø‡§Æ‡§æ' }
            },
            main_temple: {
                en: { title: 'Shore Temple Main Shrine', desc: 'The 8th-century structural masterpiece, one of the oldest in South India.', nav: 'Main Temple' },
                ta: { title: '‡Æï‡Æü‡Æ±‡Øç‡Æï‡Æ∞‡Øà ‡Æï‡Øã‡ÆØ‡Æø‡Æ≤‡Øç ‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æö‡Æ©‡Øç‡Æ©‡Æ§‡Æø', desc: '8 ‡ÆÜ‡ÆÆ‡Øç ‡Æ®‡ØÇ‡Æ±‡Øç‡Æ±‡Ææ‡Æ£‡Øç‡Æü‡Æø‡Æ©‡Øç ‡Æï‡Æü‡Øç‡Æü‡Æü‡Æï‡Øç‡Æï‡Æ≤‡Øà ‡ÆÖ‡Æ§‡Æø‡Æö‡ÆØ‡ÆÆ‡Øç, ‡Æ§‡ØÜ‡Æ©‡Øç‡Æ©‡Æø‡Æ®‡Øç‡Æ§‡Æø‡ÆØ‡Ææ‡Æµ‡Æø‡Æ©‡Øç ‡Æ™‡Æ¥‡ÆÆ‡Øà‡ÆØ‡Ææ‡Æ© ‡Æï‡Øã‡ÆØ‡Æø‡Æ≤‡Øç‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡Æí‡Æ©‡Øç‡Æ±‡ØÅ.', nav: '‡ÆÆ‡ØÅ‡Æï‡Øç‡Æï‡Æø‡ÆØ ‡Æï‡Øã‡ÆØ‡Æø‡Æ≤‡Øç' },
                kn: { title: '‡≤§‡≥Ä‡≤∞ ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤¶ ‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø ‡≤∏‡≤®‡≥ç‡≤®‡≤ø‡≤ß‡≤ø', desc: '8 ‡≤®‡≥á ‡≤∂‡≤§‡≤Æ‡≤æ‡≤®‡≤¶ ‡≤µ‡≤æ‡≤∏‡≥ç‡≤§‡≥Å‡≤∂‡≤ø‡≤≤‡≥ç‡≤™‡≤¶ ‡≤Æ‡≥á‡≤∞‡≥Å‡≤ï‡≥É‡≤§‡≤ø, ‡≤¶‡≤ï‡≥ç‡≤∑‡≤ø‡≤£ ‡≤≠‡≤æ‡≤∞‡≤§‡≤¶ ‡≤Ö‡≤§‡≥ç‡≤Ø‡≤Ç‡≤§ ‡≤π‡≤≥‡≥Ü‡≤Ø ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤í‡≤Ç‡≤¶‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.', nav: '‡≤Æ‡≥Å‡≤ñ‡≥ç‡≤Ø ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø' },
                hi: { title: '‡§§‡§ü‡•Ä‡§Ø ‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ó‡§∞‡•ç‡§≠‡§ó‡•É‡§π', desc: '8‡§µ‡•Ä‡§Ç ‡§∂‡§§‡§æ‡§¨‡•ç‡§¶‡•Ä ‡§ï‡•Ä ‡§∏‡§Ç‡§∞‡§ö‡§®‡§æ‡§§‡•ç‡§Æ‡§ï ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü ‡§ï‡•É‡§§‡§ø, ‡§¶‡§ï‡•ç‡§∑‡§ø‡§£ ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•á ‡§∏‡§¨‡§∏‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•á ‡§Æ‡§Ç‡§¶‡§ø‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§è‡§ï‡•§', nav: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§Æ‡§Ç‡§¶‡§ø‡§∞' }
            },
            outer_complex: {
                en: { title: 'Shore Temple Outer Courtyard', desc: 'The temple is surrounded by a boundary wall with numerous Nandi (sacred bull) sculptures.', nav: 'Outer Complex' },
                ta: { title: '‡Æï‡Æü‡Æ±‡Øç‡Æï‡Æ∞‡Øà ‡Æï‡Øã‡ÆØ‡Æø‡Æ≤‡Øç ‡Æµ‡ØÜ‡Æ≥‡Æø ‡ÆÆ‡ØÅ‡Æ±‡Øç‡Æ±‡ÆÆ‡Øç', desc: '‡Æï‡Øã‡ÆØ‡Æø‡Æ≤‡Øç ‡Æè‡Æ∞‡Ææ‡Æ≥‡ÆÆ‡Ææ‡Æ© ‡Æ®‡Æ®‡Øç‡Æ§‡Æø ‡Æö‡Æø‡Æ≤‡Øà‡Æï‡Æ≥‡ØÅ‡Æü‡Æ©‡Øç ‡Æï‡ØÇ‡Æü‡Æø‡ÆØ ‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æö‡Øç‡Æö‡ØÅ‡Æµ‡Æ∞‡Ææ‡Æ≤‡Øç ‡Æö‡ØÇ‡Æ¥‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡ØÅ‡Æ≥‡Øç‡Æ≥‡Æ§‡ØÅ.', nav: '‡Æµ‡ØÜ‡Æ≥‡Æø ‡Æµ‡Æ≥‡Ææ‡Æï‡ÆÆ‡Øç' },
                kn: { title: '‡≤§‡≥Ä‡≤∞ ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤¶ ‡≤π‡≥ä‡≤∞ ‡≤™‡≥ç‡≤∞‡≤æ‡≤Ç‡≤ó‡≤£', desc: '‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø‡≤µ‡≥Å ‡≤π‡≤≤‡≤µ‡≤æ‡≤∞‡≥Å ‡≤®‡≤Ç‡≤¶‡≤ø ‡≤∂‡≤ø‡≤≤‡≥ç‡≤™‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∞‡≥Å‡≤µ ‡≤ó‡≤°‡≤ø ‡≤ó‡≥ã‡≤°‡≥Ü‡≤Ø‡≤ø‡≤Ç‡≤¶ ‡≤Ü‡≤µ‡≥É‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.', nav: '‡≤π‡≥ä‡≤∞ ‡≤™‡≥ç‡≤∞‡≤æ‡≤Ç‡≤ó‡≤£' },
                hi: { title: '‡§§‡§ü‡•Ä‡§Ø ‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§¨‡§æ‡§π‡§∞‡•Ä ‡§Ü‡§Ç‡§ó‡§®', desc: '‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§ï‡§à ‡§®‡§Ç‡§¶‡•Ä (‡§™‡§µ‡§ø‡§§‡•ç‡§∞ ‡§¨‡•à‡§≤) ‡§Æ‡•Ç‡§∞‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§µ‡§æ‡§≤‡•Ä ‡§è‡§ï ‡§ö‡§æ‡§∞‡§¶‡•Ä‡§µ‡§æ‡§∞‡•Ä ‡§∏‡•á ‡§ò‡§ø‡§∞‡§æ ‡§π‡•Å‡§Ü ‡§π‡•à‡•§', nav: '‡§¨‡§æ‡§π‡§∞‡•Ä ‡§™‡§∞‡§ø‡§∏‡§∞' }
            },
            dharmaraja_ratha: {
                en: { title: 'Dharmaraja Ratha', desc: 'The tallest and most elaborate of the monolithic rathas, dedicated to Lord Shiva.', nav: 'Dharmaraja Ratha' },
                ta: { title: '‡Æ§‡Æ∞‡Øç‡ÆÆ‡Æ∞‡Ææ‡Æú ‡Æ∞‡Æ§‡ÆÆ‡Øç', desc: '‡Æí‡Æ±‡Øç‡Æ±‡Øà‡Æï‡Øç‡Æï‡Æ≤‡Øç ‡Æ∞‡Æ§‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ≤‡Øç ‡ÆÆ‡Æø‡Æï ‡Æâ‡ÆØ‡Æ∞‡ÆÆ‡Ææ‡Æ©‡Æ§‡ØÅ ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Æø‡Æ∞‡Æø‡Æµ‡Ææ‡Æï ‡Æö‡ØÜ‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ, ‡Æö‡Æø‡Æµ‡Æ™‡ØÜ‡Æ∞‡ØÅ‡ÆÆ‡Ææ‡Æ©‡ØÅ‡Æï‡Øç‡Æï‡ØÅ ‡ÆÖ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æ£‡Æø‡Æï‡Øç‡Æï‡Æ™‡Øç‡Æ™‡Æü‡Øç‡Æü‡Æ§‡ØÅ.', nav: '‡Æ§‡Æ∞‡Øç‡ÆÆ‡Æ∞‡Ææ‡Æú ‡Æ∞‡Æ§‡ÆÆ‡Øç' },
                kn: { title: '‡≤ß‡≤∞‡≥ç‡≤Æ‡≤∞‡≤æ‡≤ú ‡≤∞‡≤•', desc: '‡≤è‡≤ï‡≤∂‡≤ø‡≤≤‡≥Ü ‡≤∞‡≤•‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ö‡≤§‡≥ç‡≤Ø‡≤Ç‡≤§ ‡≤é‡≤§‡≥ç‡≤§‡≤∞‡≤¶ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤µ‡≤ø‡≤∏‡≥ç‡≤§‡≤æ‡≤∞‡≤µ‡≤æ‡≤¶ ‡≤∞‡≤•, ‡≤∂‡≤ø‡≤µ‡≤®‡≤ø‡≤ó‡≥Ü ‡≤Ö‡≤∞‡≥ç‡≤™‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.', nav: '‡≤ß‡≤∞‡≥ç‡≤Æ‡≤∞‡≤æ‡≤ú ‡≤∞‡≤•' },
                hi: { title: '‡§ß‡§∞‡•ç‡§Æ‡§∞‡§æ‡§ú ‡§∞‡§•', desc: '‡§≠‡§ó‡§µ‡§æ‡§® ‡§∂‡§ø‡§µ ‡§ï‡•ã ‡§∏‡§Æ‡§∞‡•ç‡§™‡§ø‡§§ ‡§Ö‡§ñ‡§Ç‡§° ‡§∞‡§•‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§¨‡§∏‡•á ‡§ä‡§Ç‡§ö‡§æ ‡§î‡§∞ ‡§∏‡§¨‡§∏‡•á ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§‡•§', nav: '‡§ß‡§∞‡•ç‡§Æ‡§∞‡§æ‡§ú ‡§∞‡§•' }
            },
            arjuna_ratha: {
                en: { title: 'Arjuna Ratha', desc: 'A beautiful monolithic temple with exquisite carvings of gods and celestial beings.', nav: 'Arjuna Ratha' },
                ta: { title: '‡ÆÖ‡Æ∞‡Øç‡Æú‡ØÅ‡Æ© ‡Æ∞‡Æ§‡ÆÆ‡Øç', desc: '‡Æ§‡ØÜ‡ÆØ‡Øç‡Æµ‡Æô‡Øç‡Æï‡Æ≥‡Øç ‡ÆÆ‡Æ±‡Øç‡Æ±‡ØÅ‡ÆÆ‡Øç ‡Æµ‡Ææ‡Æ©‡ØÅ‡Æ≤‡Æï ‡Æâ‡ÆØ‡Æø‡Æ∞‡Æø‡Æ©‡Æô‡Øç‡Æï‡Æ≥‡Æø‡Æ©‡Øç ‡Æ®‡Øá‡Æ∞‡Øç‡Æ§‡Øç‡Æ§‡Æø‡ÆØ‡Ææ‡Æ© ‡Æö‡ØÜ‡Æ§‡ØÅ‡Æï‡Øç‡Æï‡Æ≤‡Øç‡Æï‡Æ≥‡Øà‡Æï‡Øç ‡Æï‡Øä‡Æ£‡Øç‡Æü ‡ÆÖ‡Æ¥‡Æï‡Ææ‡Æ© ‡Æí‡Æ±‡Øç‡Æ±‡Øà‡Æï‡Øç‡Æï‡Æ≤‡Øç ‡Æï‡Øã‡ÆØ‡Æø‡Æ≤‡Øç.', nav: '‡ÆÖ‡Æ∞‡Øç‡Æú‡ØÅ‡Æ© ‡Æ∞‡Æ§‡ÆÆ‡Øç' },
                kn: { title: '‡≤Ö‡≤∞‡≥ç‡≤ú‡≥Å‡≤® ‡≤∞‡≤•', desc: '‡≤¶‡≥á‡≤µ‡≤§‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤Ü‡≤ï‡≤æ‡≤∂ ‡≤ú‡≥Ä‡≤µ‡≤ø‡≤ó‡≤≥ ‡≤∏‡≥ä‡≤ó‡≤∏‡≤æ‡≤¶ ‡≤ï‡≥Ü‡≤§‡≥ç‡≤§‡≤®‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤∞‡≥Å‡≤µ ‡≤∏‡≥Å‡≤Ç‡≤¶‡≤∞‡≤µ‡≤æ‡≤¶ ‡≤è‡≤ï‡≤∂‡≤ø‡≤≤‡≥Ü ‡≤¶‡≥á‡≤µ‡≤æ‡≤≤‡≤Ø.', nav: '‡≤Ö‡≤∞‡≥ç‡≤ú‡≥Å‡≤® ‡≤∞‡≤•' },
                hi: { title: '‡§Ö‡§∞‡•ç‡§ú‡•Å‡§® ‡§∞‡§•', desc: '‡§¶‡•á‡§µ‡§§‡§æ‡§ì‡§Ç ‡§î‡§∞ ‡§Ü‡§ï‡§æ‡§∂‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§æ‡§£‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü ‡§®‡§ï‡•ç‡§ï‡§æ‡§∂‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§è‡§ï ‡§∏‡•Å‡§Ç‡§¶‡§∞ ‡§Ö‡§ñ‡§Ç‡§° ‡§Æ‡§Ç‡§¶‡§ø‡§∞‡•§', nav: '‡§Ö‡§∞‡•ç‡§ú‡•Å‡§® ‡§∞‡§•' }
            },
            nakula_ratha: {
                en: { title: 'Nakula Sahadeva Ratha', desc: 'Unique for its apsidal shape (Gajaprishta), resembling the back of an elephant.', nav: 'Nakula Ratha' },
                ta: { title: '‡Æ®‡Æï‡ØÅ‡Æ≤ ‡Æö‡Æï‡Ææ‡Æ§‡Øá‡Æµ ‡Æ∞‡Æ§‡ÆÆ‡Øç', desc: '‡ÆØ‡Ææ‡Æ©‡Øà‡ÆØ‡Æø‡Æ©‡Øç ‡Æ™‡Æø‡Æ©‡Øç‡Æ™‡Æï‡ØÅ‡Æ§‡Æø‡ÆØ‡Øà ‡Æí‡Æ§‡Øç‡Æ§ ‡ÆÖ‡Æ§‡Æ©‡Øç ‡ÆÖ‡Æ™‡Øç‡Æö‡Æø‡Æü‡Æ≤‡Øç ‡Æµ‡Æü‡Æø‡Æµ‡Æ§‡Øç‡Æ§‡Æø‡Æ±‡Øç‡Æï‡ØÅ (‡Æï‡Æú‡Æ™‡Æø‡Æ∞‡ØÅ‡Æ∑‡Øç‡Æü‡ÆÆ‡Øç) ‡Æ™‡ØÜ‡ÆØ‡Æ∞‡Øç ‡Æ™‡ØÜ‡Æ±‡Øç‡Æ±‡Æ§‡ØÅ.', nav: '‡Æ®‡Æï‡ØÅ‡Æ≤ ‡Æ∞‡Æ§‡ÆÆ‡Øç' },
                kn: { title: '‡≤®‡≤ï‡≥Å‡≤≤ ‡≤∏‡≤π‡≤¶‡≥á‡≤µ ‡≤∞‡≤•', desc: '‡≤Ü‡≤®‡≥Ü‡≤Ø ‡≤π‡≤ø‡≤Ç‡≤≠‡≤æ‡≤ó‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥ã‡≤≤‡≥Å‡≤µ ‡≤Ö‡≤¶‡≤∞ ‡≤Ö‡≤™‡≤ø‡≤∏‡≤ø‡≤°‡≤≤‡≥ç ‡≤Ü‡≤ï‡≤æ‡≤∞‡≤ï‡≥ç‡≤ï‡≥Ü (‡≤ó‡≤ú‡≤™‡≥É‡≤∑‡≥ç‡≤†) ‡≤µ‡≤ø‡≤∂‡≤ø‡≤∑‡≥ç‡≤ü‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü.', nav: '‡≤®‡≤ï‡≥Å‡≤≤ ‡≤∞‡≤•' },
                hi: { title: '‡§®‡§ï‡•Å‡§≤ ‡§∏‡§π‡§¶‡•á‡§µ ‡§∞‡§•', desc: '‡§π‡§æ‡§•‡•Ä ‡§ï‡•Ä ‡§™‡•Ä‡§† ‡§ï‡•á ‡§∏‡§Æ‡§æ‡§® ‡§Ö‡§™‡§®‡•á ‡§Ö‡§™‡§∏‡§æ‡§á‡§°‡§≤ ‡§Ü‡§ï‡§æ‡§∞ (‡§ó‡§ú‡§™‡•É‡§∑‡•ç‡§†) ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø‡•§', nav: '‡§®‡§ï‡•Å‡§≤ ‡§∞‡§•' }
            }
        };

        function updateAudioButton() {
            if (audioState === 'playing') {
                audioBtn.textContent = 'üîä Audio Enabled';
                audioBtn.style.background = '#ff8c00';
            } else {
                audioBtn.textContent = 'üîá Audio Disabled';
                audioBtn.style.background = 'white';
                audioBtn.style.color = '#ff8c00';
            }
        }

        function toggleAudio() {
            if (audioState === 'playing') {
                window.speechSynthesis.cancel();
                const audio = document.getElementById(`${currentActiveLocation}-audio`);
                if (audio) audio.pause();
                audioState = 'paused';
            } else {
                playLocationAudio(currentActiveLocation);
            }
            updateAudioButton();
        }

        audioBtn.addEventListener('click', toggleAudio);

        function playLocationAudio(locationId) {
            // Stop any existing speech
            window.speechSynthesis.cancel();

            document.querySelectorAll('audio').forEach(a => {
                a.pause();
                a.currentTime = 0;
            });

            const lang = document.getElementById('language-switcher').value;
            const audio = document.getElementById(`${locationId}-audio`);

            // Map languages to SpeechSynthesis voices
            const voiceLangs = {
                en: 'en-US',
                ta: 'ta-IN',
                kn: 'kn-IN',
                hi: 'hi-IN'
            };

            if (audio) {
                const basePath = `audio/${locationId}`;
                const audioSrc = lang === 'en' ? `${basePath}.mp3` : `${basePath}_${lang}.mp3`;
                audio.src = audioSrc;
                audio.load();

                audio.play().then(() => {
                    audioState = 'playing';
                    updateAudioButton();
                }).catch(err => {
                    console.warn("Audio file not found or autoplay blocked, falling back to TTS:", err);
                    // Fallback to Text-to-Speech
                    speakDescription(locationId, lang);
                });
            } else {
                speakDescription(locationId, lang);
            }
        }

        function speakDescription(locationId, lang) {
            if (!translations[locationId]) return;

            const text = translations[locationId][lang].desc;
            const utterance = new SpeechSynthesisUtterance(text);

            const voiceLangs = {
                en: 'en-US',
                ta: 'ta-IN',
                kn: 'kn-IN',
                hi: 'hi-IN'
            };

            utterance.lang = voiceLangs[lang] || 'en-US';
            utterance.rate = 0.9; // Slightly slower for better clarity

            utterance.onstart = () => {
                audioState = 'playing';
                updateAudioButton();
            };

            utterance.onend = () => {
                audioState = 'paused';
                updateAudioButton();
            };

            window.speechSynthesis.speak(utterance);
        }

        document.getElementById('start-vr-btn').addEventListener('click', () => {
            document.getElementById('vr-splash').style.display = 'none';
            currentActiveLocation = 'shivan_statue';
            audioContextLoaded = true;
            playLocationAudio('shivan_statue');
        });

        document.getElementById('language-switcher').addEventListener('change', function () {
            const lang = this.value;
            Object.keys(translations).forEach(id => {
                const label = document.getElementById(`${id}-label`);
                if (label) {
                    label.querySelector('.label-title').textContent = translations[id][lang].title;
                    label.querySelector('.label-desc').textContent = translations[id][lang].desc;
                }
                const navBtn = document.getElementById(`btn-${id}`);
                if (navBtn) navBtn.textContent = translations[id][lang].nav;
            });
            if (audioState === 'playing') playLocationAudio(currentActiveLocation);
        });

        function goTo(place) {
            const locations = {
                shivan_statue: { lat: 12.6164578, lng: 80.1993684, heading: 0 },
                main_temple: { lat: 12.6164704, lng: 80.1992754, heading: 90 },
                outer_complex: { lat: 12.6168093, lng: 80.1990256, heading: 180 },
                dharmaraja_ratha: { lat: 12.6088429, lng: 80.1894828, heading: 270 },
                arjuna_ratha: { lat: 12.608761, lng: 80.1897363, heading: 0 },
                nakula_ratha: { lat: 12.6092166, lng: 80.1897195, heading: 90 }
            };
            const target = locations[place];
            const svService = new google.maps.StreetViewService();
            svService.getPanorama({ location: target, radius: 50 }, (data, status) => {
                if (status === 'OK') {
                    panorama.setPano(data.location.pano);
                    panorama.setPov({ heading: target.heading, pitch: 0, zoom: 1 });
                }
            });
        }

        function initPanorama() {
            const sculptures = [
                { id: "shivan_statue", location: { lat: 12.6164578, lng: 80.1993684 }, heading: 0, pitch: 0 },
                { id: "main_temple", location: { lat: 12.6164704, lng: 80.1992754 }, heading: 90, pitch: 0 },
                { id: "outer_complex", location: { lat: 12.6168093, lng: 80.1990256 }, heading: 180, pitch: 0 },
                { id: "dharmaraja_ratha", location: { lat: 12.6088429, lng: 80.1894828 }, heading: 270, pitch: 0 },
                { id: "arjuna_ratha", location: { lat: 12.608761, lng: 80.1897363 }, heading: 0, pitch: 0 },
                { id: "nakula_ratha", location: { lat: 12.6092166, lng: 80.1897195 }, heading: 90, pitch: 0 }
            ];

            const svService = new google.maps.StreetViewService();
            svService.getPanorama({ location: sculptures[0].location, radius: 50 }, (data, status) => {
                if (status === "OK") {
                    panorama = new google.maps.StreetViewPanorama(document.getElementById("street-view"), {
                        pano: data.location.pano,
                        pov: { heading: 0, pitch: 0 },
                        visible: true,
                        addressControl: false
                    });

                    panorama.addListener("pov_changed", () => {
                        const pov = panorama.getPov();
                        const pos = panorama.getPosition();
                        let newActiveLocation = null;

                        sculptures.forEach(sculpture => {
                            const headingDiff = Math.abs(pov.heading % 360 - sculpture.heading);
                            const distance = google.maps.geometry.spherical.computeDistanceBetween(
                                pos, new google.maps.LatLng(sculpture.location.lat, sculpture.location.lng)
                            );
                            const isVisible = headingDiff <= 20 && distance <= 15;
                            document.getElementById(`${sculpture.id}-label`).style.display = isVisible ? "block" : "none";
                            if (isVisible) newActiveLocation = sculpture.id;
                        });

                        if (newActiveLocation && newActiveLocation !== currentActiveLocation) {
                            currentActiveLocation = newActiveLocation;
                            if (audioContextLoaded) playLocationAudio(newActiveLocation);
                        }
                    });
                    panoramaReady = true;
                }
            });
        }

        document.getElementById('fullscreen-btn').addEventListener('click', () => {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        });
    </script>
</body>

</html>